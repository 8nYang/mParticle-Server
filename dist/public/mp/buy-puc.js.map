{"version":3,"sources":["public/mp/buy-puc.js"],"names":["express","require","buy_puc","Router","mParticle","config","Configuration","apiClient","ApiClient","basePath","api","EventsApi","random_choice","a_src","sel","Math","floor","random","length","weighted_random_choice","data","total","i","threshold","uuidv4","replace","c","r","v","toString","get","req","res","batch","Batch","Environment","development","context","user_identities","UserIdentities","query","customerid","mp_deviceid","a_prod_items","a_Stores","puc_product","Product","product_set","name","id","brand","category","quantity","price","coupon_code","custom_attributes","key","value","Object","entries","total_product_amount","substring","product_action","ProductAction","products","total_amount","tax_amount","round","transaction_id","commerce_event","CommerceEvent","currency_code","ceil","timestamp_unixtime_ms","Date","now","addEvent","body","callback","error","response","send","header","JSON","stringify","bulkUploadEvents","module","exports"],"mappings":"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","file":"buy-puc.js","sourceRoot":"../src","sourcesContent":["var express = require('express');\nvar buy_puc = express.Router();\nvar mParticle = require('mparticle');\n\n//https://demo.mp.com/mp/buy_puc?customerid=31160825\nvar config = new mParticle.Configuration(\n    'us2-0c40b6fcec02354f9179838bc68c8edf',\n    '_FME4g_b9pFY8iAglexCpx9Qt7IA7uhAzvzfgUzI_xo1rCeRntktI7gStxUPuLy3');\nvar apiClient = new mParticle.ApiClient()\napiClient.basePath = 'https://s2s.us2.mparticle.com/v2'\nvar api = new mParticle.EventsApi(config, apiClient);\n\nfunction random_choice(a_src) {\n    var sel = Math.floor(Math.random() * a_src.length)\n    return [a_src[sel], sel];\n}\n\nfunction weighted_random_choice(data) {\n    let total = 0;\n    for (let i = 0; i < data.length; ++i) {\n        total += data[i][1];\n    }\n    // Total in hand, we can now pick a random value akin to our\n    // random index from before.\n    const threshold = Math.random() * total;\n    \n    total = 0;\n    for (let i = 0; i < data.length - 1; ++i) {\n        // Add the weight to our running total.\n        total += data[i][1];\n\n        // If this value falls within the threshold, we're done!\n        if (total >= threshold) {\n            return [data[i][0], i];\n        }\n    }\n\n    // Wouldn't you know it, we needed the very last entry!\n    return [data[data.length - 1][0], data.length - 1];\n}\n\nfunction uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\nbuy_puc.get('/', function(req, res) {\n    \n    var batch = new mParticle.Batch(mParticle.Batch.Environment.development);\n    batch.context = { \n        \"data_plan\": {\n            \"plan_id\": \"dp_example\",\n            \"plan_version\": 1\n        }\n    }\n    var user_identities = new mParticle.UserIdentities();\n    \n    if ('customerid' in req.query) {\n        user_identities.customerid = req.query['customerid']\n    }\n    batch.user_identities = user_identities;\n    batch.mp_deviceid = \"b9d2ebab-a768-048f-b2f8-eeb1042ac6d8\"\n    \n    let a_prod_items = [\n        [\"Marie Lund - Women's evening dress\", \"659162-0001\", 169.99, \"0%\", \"MARIE LUND\", \"Ladies\", \"Ladies - Clothing - Dresses\", {\"Size\": \"36\"}, \"https://static.vangraaf.com/img/Damen-Abendkleid_pdstandard_659162-0001_modelfront_1.jpg\"],\n        [\"Hugo - Men's Coat - H-Hyde-J-Bib-234\", \"650707-0001\", 549.99, \"0%\", \"HUGO\", \"Men's\", \"Men's - Clothing - Coats\", {\"Size\": \"52\"}, \"https://static.vangraaf.com/img/Herren-Mantel-H-Hyde-J-Bib-234_pdstandard_650707-0001_modelfront_1.jpg\"],\n        [\"Lloyd - Women's pumps\", \"679284-0002\", 119.99, \"0%\", \"LLOYD\", \"Ladies\", \"Ladies - Shoes - Pumps\", {\"size\": \"36\"}, \"https://static.vangraaf.com/img/Damen-Pumps_pdstandard_679284-0002_stillfront_1.jpg\"],\n        [\"Lego - Boys winter hat\", \"685310-0003\", 22.99, \"0%\", \"LEGO\", \"Kids & Teens\", \"Kids & Teens - Accessories - Hats & Caps\", {\"Size\": \"54 - 56\"}, \"https://static.vangraaf.com/img/Jungen-Winterm-tze_pdstandard-bust_685310-0003_bustfront_1.jpg\"],\n        [\"Izia - Girls summer dress\", \"660754-0001\", 149.99, \"21.4%\", \"IZIA\", \"Kids & Teens\", \"Kids & Teens - Clothing - Dresses & Skirts\", {\"Size\": \"122\"}, \"https://static.vangraaf.com/img/M-dchen-Sommerkleid_pdstandard_660754-0001_modelfront_1.jpg\"]\n    ];\n\n    let a_Stores = [\n        [\"Bielefeld\", \"33602\"], \n        [\"Braunschweig\", \"38100\"], \n        [\"Bremen, Obernstrasse\", \"28195\"], \n        [\"Bremen, Weserpark\", \"28307\"], \n        [\"Chemnitz\", \"09111\"], \n        [\"Dresden\", \"01067\"], \n        [\"Flensburg\", \"24937\"], \n        [\"Hamburg, Bergedorf\", \"21029\"], \n        [\"Hamburg, Mönckebergstraße\", \"20095\"], \n        [\"Hanover\", \"30159\"], \n        [\"Kiel\", \"24103\"], \n        [\"Hamburg, Elbe\", \"22609\"],\n        [\"Lüneburg\", \"21335\"],\n        [\"Norderstedt\", \"22850\"],\n        [\"Stralsund\", \"18439\"],\n        [\"Rostock\", \"18055\"]\n    ];\n    \n    var puc_product = new mParticle.Product();\n    \n    var [product_set, sel] = random_choice(a_prod_items);\n    //console.log(\"Product Set: \" + product_set)\n    puc_product.name = product_set[0];\n    puc_product.id = product_set[1];\n    puc_product.brand = product_set[4];\n    puc_product.category = product_set[5];\n    puc_product.quantity = 1;\n    puc_product.price = product_set[2];\n    puc_product.coupon_code = product_set[3]\n    puc_product.custom_attributes = {};\n    for (const [key, value] of Object.entries(product_set[7])) {\n      //console.log(`${key}: ${value}`);\n      puc_product.custom_attributes[key] = value;\n    }\n    puc_product.custom_attributes[\"Sub Category\"] = product_set[6]\n    puc_product.total_product_amount = puc_product.quantity * puc_product.price * (100 - (puc_product.coupon_code.substring(0, puc_product.coupon_code.length - 1)))/100;\n\n    \n    var product_action = new mParticle.ProductAction('purchase');\n    product_action.products = [puc_product];\n    product_action.total_amount = 0;\n    for (var i = 0; i < product_action.products.length; i++) {\n        product_action.total_amount += product_action.products[i].total_product_amount;\n    }\n    product_action.tax_amount = Math.round(product_action.total_amount * 0.19 * 100) / 100;\n    product_action.total_amount = Math.round(product_action.total_amount * 1.19 * 100) / 100\n    product_action.transaction_id = \"P&C-\" + uuidv4();\n\n    var commerce_event = new mParticle.CommerceEvent();\n    commerce_event.product_action = product_action;\n    commerce_event.currency_code = \"EUR\";\n    commerce_event.custom_attributes = {};\n    commerce_event.custom_attributes['Payment Type'] = random_choice([\"PayPal\", \"Klarna\", \"Master Card\", \"Visa\", \"American Express\"])[0];\n    commerce_event.custom_attributes['Delivery Option'] = random_choice([\"Click & Collect\", \"DHL\", \"Hermes\", \"In Store\"])[0];\n    if (commerce_event.custom_attributes['Delivery Option'] == \"Click & Collect\" || commerce_event.custom_attributes['Delivery Option'] == \"In Store\") {\n        commerce_event.custom_attributes['Store Name'] = random_choice(a_Stores)[0][0];\n        commerce_event.custom_attributes['Store Code'] = random_choice(a_Stores)[0][1];\n    }\n    commerce_event.custom_attributes['P&C* Points'] = Math.ceil(product_action.total_amount/10);\n    if ('token' in req.query) {\n        commerce_event.custom_attributes['Token'] = req.query['token'];\n    }\n    commerce_event.timestamp_unixtime_ms = Date.now(); //replace with time of transaction\n\n    batch.addEvent(commerce_event);\n    \n    var body = [batch]\n    var callback = function(error, data, response) {\n        if (error) {\n            res.send('Error: ' + error);\n        } else {\n            res.header(\"Content-Type\",'application/json');\n            res.send(JSON.stringify({\n                'Product_Item': a_prod_items[sel][0],\n                'Payment_Amount': puc_product.total_product_amount.toString(),\n                \"P&C*_Points\": (Math.ceil(product_action.total_amount/10)).toString(),\n                'Product_Image': a_prod_items[sel][8]\n            }, null, 4));\n        }\n    };\n\n    api.bulkUploadEvents(body, callback);\n\n});\n\nmodule.exports = buy_puc;\n"]}